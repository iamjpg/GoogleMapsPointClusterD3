/*! google-maps-d3-marker-cluster 2018-07-17 */

!function(n){function r(e){if(i[e])return i[e].exports;var t=i[e]={exports:{},id:e,loaded:!1};return n[e].call(t.exports,t,t.exports,r),t.loaded=!0,t.exports}var i={};r.m=n,r.c=i,r.p="dist/",r(0)}([function(e,t,n){"use strict";var r,i=n(11),o=((r=i)&&r.__esModule,n(2));window.PointCluster=o.PointCluster},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Point=void 0;var o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),s=r(n(9)),a=r(n(6));t.Point=function(){function i(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=3<arguments.length&&void 0!==arguments[3]&&arguments[3];(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,i),this.map=e,this.collection=t,this.markerListeners=[],this.customPinClickBehavior=n,this.customPinHoverBehavior=r,this.previousClickedMarker=null,this.oms=new a.default(this.map,{markersWontMove:!0,markersWontHide:!0,nearbyDistance:10,keepSpiderfied:!0,legWeight:3,usualLegZIndex:25e3}),this.setDocumentClick()}return o(i,[{key:"print",value:function(){var o=this;this.markers=[],this.collection.forEach(function(e,t){var n=e.lat||e.location.latitude,r=e.lng||e.location.longitude,i=new s.default({position:new google.maps.LatLng(n,r),map:o.map,hoverContent:e.hoverData||"",clickContent:e.clickData||"",labelContent:"",icon:{path:google.maps.SymbolPath.CIRCLE,scale:0},draggable:!1,labelAnchor:new google.maps.Point(10,10),labelClass:"marker-point",labelData:e.dataset});o.markers.push(i),o.oms.addMarker(i),setTimeout(function(){null===document.querySelector("#popper-container")&&(document.createElement("template").innerHTML=o.returnHoverTemplate(),$(o.map.getDiv()).append(o.returnHoverTemplate()));null===document.querySelector("#popper-container-clicked")&&(document.createElement("template").innerHTML=o.returnClickTemplate(),$(o.map.getDiv()).append(o.returnClickTemplate()))},1e3)}),this.setEvents(!1),this.setOmsEvents()}},{key:"setOmsEvents",value:function(){var n=this;this.oms.addListener("click",function(e,t){n.removePopper()}),this.oms.addListener("spiderfy",function(e,t){setTimeout(function(){n.removeUniversalPointHoverState(),requestAnimationFrame(function(){n.removePopper(!0)}),n.markers.forEach(function(e){e.setOptions({zIndex:1e3,labelClass:e.labelClass+" fadePins"})}),e.forEach(function(e){n.removeListeners(),n.setEvents(!0),e.setOptions({zIndex:2e4,labelClass:"marker-point"})})},250)}),this.oms.addListener("unspiderfy",function(e,t){setTimeout(function(){n.removeUniversalPointHoverState(),n.removePopper(),n.markers.forEach(function(e){e.setOptions({zIndex:1e3,labelClass:e.labelClass.replace(" fadePins","")})}),n.setEvents(!1)},250)})}},{key:"setEvents",value:function(){var r=(0<arguments.length&&void 0!==arguments[0]&&arguments[0],this);this.markers.forEach(function(e){e.addListener("mouseover",function(e){var t=e.target,n=$(t).index();r.setMouseOver(r.markers[n],e)}),e.addListener("mouseout",function(e){var t=e.target,n=$(t).index();r.setMouseOut(r.markers[n])}),e.addListener("click",function(e){var t=e.target,n=$(t).index();r.setClickEvent(r.markers[n],e)})})}},{key:"setMouseOver",value:function(e,t){e.setOptions({zIndex:1e4,labelClass:e.labelClass+" PointHoverState"}),this.showPopper(e,t)}},{key:"setMouseOut",value:function(e){e.setOptions({zIndex:100,labelClass:"marker-point"}),this.removePopper(!1)}},{key:"setClickEvent",value:function(e,t){return PointPubSub.publish("Point.click",t),this.removePopper(!0),""!==e.get("clickContent")&&void this.showPopper(e,t)}},{key:"returnHoverTemplate",value:function(){return'\n      <div id="popper-container">\n        <div class="arrow_box">\n\n        </div>\n      </div>\n    '}},{key:"returnClickTemplate",value:function(){return'\n      <div id="popper-container-clicked">\n        <div class="arrow_box_clicked">\n\n        </div>\n      </div>\n    '}},{key:"showPopper",value:function(e,t){var n=this.map,r=n.getProjection(),i=r.fromLatLngToPoint(n.getBounds().getNorthEast()),o=r.fromLatLngToPoint(n.getBounds().getSouthWest()),s=Math.pow(2,n.getZoom()),a=r.fromLatLngToPoint(new google.maps.LatLng(e.internalPosition.lat(),e.internalPosition.lng())),l=void 0;"click"===t.type?(l=document.querySelector("#popper-container-clicked"),document.querySelector(".arrow_box_clicked").innerHTML=e.get("clickContent")):(l=document.querySelector("#popper-container"),document.querySelector(".arrow_box").innerHTML=e.get("hoverContent"));l.style.display="block";var p=l.offsetHeight,u=l.offsetWidth,c=parseInt((a.x-o.x)*s-(u/2+4)),h=parseInt((a.y-i.y)*s-(20+p));l.style.top=h+"px",l.style.left=c+"px"}},{key:"removePopper",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=document.querySelector("#popper-container");if(null===t)return!1;(t.style.display="none",e)&&(document.querySelector("#popper-container-clicked").style.display="none")}},{key:"removeUniversalPointHoverState",value:function(){this.markers.forEach(function(e,t){e.setOptions({zIndex:100,labelClass:"marker-point"})})}},{key:"removeListeners",value:function(){for(var e=0;e<this.markerListeners.length;e++)google.maps.event.removeListener(this.markerListeners[e]);this.markerListeners=[]}},{key:"remove",value:function(){this.removeListeners();for(var e=0;e<this.markers.length;e++)this.markers[e].setMap(null)}},{key:"setDocumentClick",value:function(){var t=this;document.addEventListener("click",function(e){-1===e.target.className.indexOf("clicked")&&t.removePopper(!0)})}}]),i}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PointCluster=void 0;var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=r(n(4)),o=r(n(5)),s=n(1),l=n(3),p=r(n(12));window.PointPubSub=p.default,t.PointCluster=function(){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.map?(this.map=e.map,this.mapContainer=e.map.getDiv().getAttribute("id"),this.clusterRange=e.clusterRange||300,this.threshold=e.threshold||200,this.clusterRgba=e.clusterRgba||"51, 102, 153, 0.8",this.clusterBorder=e.clusterBorder||"5px solid #ccc",this.polygonStrokeColor=e.polygonStrokeColor||"#336699",this.polygonStrokeOpacity=e.polygonStrokeOpacity||"0.5",this.polygonStrokeWeight=e.polygonStrokeWeight||"4",this.polygonFillColor=e.polygonFillColor||"#336699",this.polygonFillOpacity=e.polygonFillOpacity||"0.2",this.customPinHoverBehavior=e.customPinHoverBehavior||!1,this.customPinClickBehavior=e.customPinClickBehavior||!1,void this.setMapEvents()):console.error("ERROR: Google map instance is a requirement.")}return i(t,[{key:"setCollection",value:function(e){var t=new l.Helpers;return e?(this.collection=e,void(window.collection=t.clone(e))):console.error("Please pass an array of location objects. Ignore if running tests.")}},{key:"createOverlay",value:function(){this.overlay&&this.overlay.setMap(null),this.overlay=new o.default(this.map),this.overlay.setMap(this.map),window.overlay=this.overlay}},{key:"checkIfLatLngInBounds",value:function(){for(var e=(new l.Helpers).clone(this.collection),t=0;t<e.length;++t){var n=e[t].lat||e[t].location.latitude,r=e[t].lng||e[t].location.longitude;this.map.getBounds().contains(new google.maps.LatLng(n,r))||(e.splice(t,1),--t)}return e}},{key:"print",value:function(){var e=this,t=d3.geoMercator(),n=(d3.geoPath().projection(t).pointRadius(1),d3.quadtree().addAll(this.returnPointsRaw())),r=this.getCenterPoints(n);this.createOverlay(),e.points&&e.points.remove();var i=setInterval(function(){document.getElementById("point_cluster_overlay")&&(clearInterval(i),e.checkIfLatLngInBounds().length<=e.threshold?(e.overlay.setMap(null),e.points=window.PointClusterPoints=new s.Point(e.map,e.checkIfLatLngInBounds(),e.customPinClickBehavior,e.customPinHoverBehavior),e.points.print(),p.default.publish("Point.count",e.points.collection.length),p.default.publish("Point.show",e.points.collection)):(p.default.publish("Point.count",e.checkIfLatLngInBounds().length),e.paintClustersToCanvas(r)))},10)}},{key:"paintClustersToCanvas",value:function(e){var c=this,h=document.createDocumentFragment(),g=new l.Helpers;e.forEach(function(e,t){var n=e[2].length,r=document.createElement("div");r.className="point-cluster "+g.returnClusterClassObject(n.toString().length).classSize,r.style.backgroundColor="rgba("+c.clusterRgba+")",r.dataset.positionid=t;var i=[];e[2].forEach(function(e,t){i.push(e[2])});var o,s=[],a=g.returnMapProjections(c.map);for(i.forEach(function(e,t){var n=c.collection[parseInt(e)];s.push(new google.maps.LatLng(n.lat,n.lng))}),o=0;o<s.length;o++)a.bounds.extend(s[o]);var l=a.projection.fromLatLngToPoint(new google.maps.LatLng(a.bounds.getCenter().lat(),a.bounds.getCenter().lng())),p=parseInt((l.x-a.bottomLeft.x)*a.scale),u=parseInt((l.y-a.topRight.y)*a.scale);r.style.left=p-g.returnClusterClassObject(n.toString().length).offSet+"px",r.style.top=u-g.returnClusterClassObject(n.toString().length).offSet+"px",r.dataset.latlngids=i.join(","),r.innerHTML=n,h.appendChild(r),c.setClusterEvents(r)}),document.getElementById("point_cluster_overlay").appendChild(h)}},{key:"setClusterEvents",value:function(e){var t=this;e.onmouseover=function(){t.showPolygon(this)},e.onmouseout=function(){t.removePolygon()},e.onclick=function(){t.removeElements(),t.removePolygon(),t.zoomToFit(this)}}},{key:"setMapEvents",value:function(){var e=this;google.maps.event.addListener(this.map,"zoom_changed",function(){e.collection&&$(".point-cluster").hide()}),google.maps.event.addListener(this.map,"drag",function(){e.collection&&$(".point-cluster").hide()}),google.maps.event.addListener(this.map,"idle",function(){e.collection&&e.print()})}},{key:"zoomToFit",value:function(e){var r=this,t=e.dataset.latlngids.split(","),n=[],i=[];t.forEach(function(e,t){var n=r.collection[parseInt(e)];i.push({x:n.lat,y:n.lng})}),(i=(0,a.default)(i)).forEach(function(e,t){n.push(new google.maps.LatLng(e.x,e.y))});for(var o=new google.maps.LatLngBounds,s=0;s<n.length;s++)o.extend(n[s]);requestAnimationFrame(function(){var e=o.getCenter().lat(),t=o.getCenter().lng(),n=r.map.getZoom();r.map.setCenter(new google.maps.LatLng(e,t)),r.map.setZoom(n+1)})}},{key:"returnPointsRaw",value:function(){var r=(new l.Helpers).returnMapProjections(this.map);return this.pointsRawLatLng=[],this.collection.map(function(e,t){var n=r.projection.fromLatLngToPoint(new google.maps.LatLng(e.lat,e.lng));return[(n.x-r.bottomLeft.x)*r.scale,(n.y-r.topRight.y)*r.scale,t]})}},{key:"searchQuadTree",value:function(e,s,a,l,p){var u=[];return e.visit(function(e,t,n,r,i){var o=e.data;return o&&(o.selected=o[0]>=s&&o[0]<l&&o[1]>=a&&o[1]<p,o.selected&&u.push(o)),l<=t||p<=n||r<s||i<a}),u}},{key:"getCenterPoints",value:function(e){for(var t=[],n=0;n<=document.getElementById(this.mapContainer).offsetWidth;n+=this.clusterRange)for(var r=0;r<=document.getElementById(this.mapContainer).offsetHeight;r+=this.clusterRange){var i=this.searchQuadTree(e,n,r,n+this.clusterRange,r+this.clusterRange),o=i.reduce(function(e,t){return[e[0]+t[0],e[1]+t[1]]},[0,0]);o[0]=o[0]/i.length,o[1]=o[1]/i.length,o.push(i),o[0]&&o[1]&&t.push(o)}return t}},{key:"removeElements",value:function(){for(var e=document.getElementsByClassName("point-cluster");0<e.length;)e[0].parentNode.removeChild(e[0])}},{key:"showPolygon",value:function(e){var r=this,t=e.dataset.latlngids.split(",");t.push(t[0]);var i=[];t.forEach(function(e,t){var n=r.collection[parseInt(e)];i.push({x:n.lat,y:n.lng})}),i=(i=(0,a.default)(i)).map(function(e){return{lat:e.x,lng:e.y}}),this.polygon=new google.maps.Polygon({paths:i,strokeColor:r.polygonStrokeColor,strokeOpacity:r.polygonStrokeOpacity,strokeWeight:r.polygonStrokeWeight,fillColor:r.polygonFillColor,fillOpacity:r.polygonFillOpacity}),this.polygon.setMap(r.map)}},{key:"removePolygon",value:function(){return void 0!==this.polygon&&void this.polygon.setMap(null)}}]),t}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();t.Helpers=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"clone",value:function(e){var t="[object Array]"=={}.toString.apply(e)?[]:{};for(var n in e)t[n]="object"==r(e[n])?this.clone(e[n]):e[n];return t}},{key:"returnClusterClassObject",value:function(e){var t,n;return 3<=e?(t="large",n=25):2==e?(t="medium",n=20):(t="small",n=15),{classSize:t,offSet:n}}},{key:"returnMapProjections",value:function(e){var t=new google.maps.LatLngBounds,n=e.getProjection();return{bounds:t,projection:n,topRight:n.fromLatLngToPoint(e.getBounds().getNorthEast()),bottomLeft:n.fromLatLngToPoint(e.getBounds().getSouthWest()),scale:Math.pow(2,e.getZoom())}}}]),e}()},function(t,n,r){var i;!function(){"use strict";function e(e){e.sort(function(e,t){return e.x!=t.x?e.x-t.x:e.y-t.y});for(var t=e.length,n=[],r=0;r<2*t;r++){for(var i=r<t?r:2*t-1-r;2<=n.length&&(o=n[n.length-2],s=n[n.length-1],a=e[i],void 0,l=(o.x-s.x)*(a.y-s.y)-(o.y-s.y)*(a.x-s.x),p=(o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y),l<0||0==l&&p<=0);)n.pop();n.push(e[i])}var o,s,a,l,p;return n.pop(),n}void 0===(i=function(){return e}.call(n,r,n,t))||(t.exports=i)}()},function(e,t){"use strict";function n(e){this.map=e}(n.prototype=new google.maps.OverlayView).onRemove=function(){this.div.parentNode.removeChild(this.div),this.div=null},n.prototype.onAdd=function(){this.div=document.createElement("div"),this.div.id="point_cluster_overlay",this.getPanes().overlayImage.appendChild(this.div)},n.prototype.draw=function(){var e=this.getProjection(),t=e.fromLatLngToDivPixel(this.map.getBounds().getSouthWest()),n=e.fromLatLngToDivPixel(this.map.getBounds().getNorthEast());this.div.style.left=t.x+"px",this.div.style.top=n.y+"px"},e.exports=n},function(e,t){"use strict";var p={}.hasOwnProperty,u=[].slice,n=function(){function e(e,t){var n,r,i,o,s,a;for(r in this.map=e,null==t&&(t={}),t)p.call(t,r)&&(i=t[r],this[r]=i);for(this.projHelper=new this.constructor.ProjHelper(this.map),this.initMarkerArrays(),this.listeners={},o=0,s=(a=["click","zoom_changed","maptypeid_changed"]).length;o<s;o++)n=a[o],d.addListener(this.map,n,function(e){return function(){return e.unspiderfy()}}(this))}var d,f,t,n,r,v,l,i,o,s;for(i=0,o=(s=[e,v=e.prototype]).length;i<o;i++)s[i].VERSION="0.3.3";return f=google.maps,d=f.event,r=f.MapTypeId,l=2*Math.PI,v.keepSpiderfied=!1,v.markersWontHide=!1,v.markersWontMove=!1,v.nearbyDistance=20,v.circleSpiralSwitchover=9,v.circleFootSeparation=43,v.circleStartAngle=l/12,v.spiralFootSeparation=26,v.spiralLengthStart=11,v.spiralLengthFactor=4,v.spiderfiedZIndex=1e3,v.usualLegZIndex=10,v.highlightedLegZIndex=20,v.legWeight=1.5,v.legColors={usual:{},highlighted:{}},n=v.legColors.usual,t=v.legColors.highlighted,n[r.HYBRID]=n[r.SATELLITE]="#fff",t[r.HYBRID]=t[r.SATELLITE]="#f00",n[r.TERRAIN]=n[r.ROADMAP]="#444",t[r.TERRAIN]=t[r.ROADMAP]="#f00",v.initMarkerArrays=function(){return this.markers=[],this.markerListenerRefs=[]},v.addMarker=function(t){var e,n,r,i;return null!=t._oms||(t._oms=!0,e=[d.addListener(t,"click",(i=this,function(e){return i.spiderListener(t,e)}))],this.markersWontHide||e.push(d.addListener(t,"visible_changed",(r=this,function(){return r.markerChangeListener(t,!1)}))),this.markersWontMove||e.push(d.addListener(t,"position_changed",(n=this,function(){return n.markerChangeListener(t,!0)}))),this.markerListenerRefs.push(e),this.markers.push(t)),this},v.markerChangeListener=function(e,t){if(null!=e._omsData&&(t||!e.getVisible())&&null==this.spiderfying&&null==this.unspiderfying)return this.unspiderfy(t?e:null)},v.getMarkers=function(){return this.markers.slice(0)},v.removeMarker=function(e){var t,n,r,i,o;if(null!=e._omsData&&this.unspiderfy(),(t=this.arrIndexOf(this.markers,e))<0)return this;for(i=0,o=(r=this.markerListenerRefs.splice(t,1)[0]).length;i<o;i++)n=r[i],d.removeListener(n);return delete e._oms,this.markers.splice(t,1),this},v.clearMarkers=function(){var e,t,n,r,i,o,s,a,l;for(this.unspiderfy(),e=i=0,s=(l=this.markers).length;i<s;e=++i){for(r=l[e],o=0,a=(n=this.markerListenerRefs[e]).length;o<a;o++)t=n[o],d.removeListener(t);delete r._oms}return this.initMarkerArrays(),this},v.addListener=function(e,t){var n;return(null!=(n=this.listeners)[e]?n[e]:n[e]=[]).push(t),this},v.removeListener=function(e,t){var n;return(n=this.arrIndexOf(this.listeners[e],t))<0||this.listeners[e].splice(n,1),this},v.clearListeners=function(e){return this.listeners[e]=[],this},v.trigger=function(){var e,t,n,r,i,o,s,a;for(t=arguments[0],e=2<=arguments.length?u.call(arguments,1):[],a=[],r=0,i=(s=null!=(o=this.listeners[t])?o:[]).length;r<i;r++)n=s[r],a.push(n.apply(null,e));return a},v.generatePtsCircle=function(e,t){var n,r,i,o,s,a;for(o=this.circleFootSeparation*(2+e)/l,r=l/e,a=[],i=s=0;0<=e?s<e:e<s;i=0<=e?++s:--s)n=this.circleStartAngle+i*r,a.push(new f.Point(t.x+o*Math.cos(n),t.y+o*Math.sin(n)));return a},v.generatePtsSpiral=function(e,t){var n,r,i,o,s,a;for(i=this.spiralLengthStart,a=[],r=s=n=0;0<=e?s<e:e<s;r=0<=e?++s:--s)n+=this.spiralFootSeparation/i+5e-4*r,o=new f.Point(t.x+i*Math.cos(n),t.y+i*Math.sin(n)),i+=l*this.spiralLengthFactor/n,a.push(o);return a},v.spiderListener=function(e,t){var n,r,i,o,s,a,l,p,u,c,h;if((o=null!=e._omsData)&&this.keepSpiderfied||this.unspiderfy(),o||this.map.getStreetView().getVisible()||"GoogleEarthAPI"===this.map.getMapTypeId())return this.trigger("click",e,t);for(a=[],l=[],p=(s=this.nearbyDistance)*s,i=this.llToPt(e.position),u=0,c=(h=this.markers).length;u<c;u++)null!=(n=h[u]).map&&n.getVisible()&&(r=this.llToPt(n.position),this.ptDistanceSq(r,i)<p?a.push({marker:n,markerPt:r}):l.push(n));return 1===a.length?this.trigger("click",e,t):this.spiderfy(a,l)},v.markersNearMarker=function(e,t){var n,r,i,o,s,a,l,p,u,c,h;if(null==t&&(t=!1),null==this.projHelper.getProjection())throw"Must wait for 'idle' event on map before calling markersNearMarker";for(a=(s=this.nearbyDistance)*s,i=this.llToPt(e.position),o=[],l=0,p=(u=this.markers).length;l<p&&!((n=u[l])!==e&&null!=n.map&&n.getVisible()&&(r=this.llToPt(null!=(c=null!=(h=n._omsData)?h.usualPosition:void 0)?c:n.position),this.ptDistanceSq(r,i)<a&&(o.push(n),t)));l++);return o},v.markersNearAnyOtherMarker=function(){var e,t,n,s,r,i,o,a,l,p,u,c,h,g,d,f,v,m,y,k,b;if(null==this.projHelper.getProjection())throw"Must wait for 'idle' event on map before calling markersNearAnyOtherMarker";for(u=(p=this.nearbyDistance)*p,l=function(){var e,t,n,r,i,o;for(o=[],e=0,t=(n=this.markers).length;e<t;e++)s=n[e],o.push({pt:this.llToPt(null!=(r=null!=(i=s._omsData)?i.usualPosition:void 0)?r:s.position),willSpiderfy:!1});return o}.call(this),t=c=0,d=(m=this.markers).length;c<d;t=++c)if(null!=(r=m[t]).map&&r.getVisible()&&!(i=l[t]).willSpiderfy)for(n=h=0,f=(y=this.markers).length;h<f;n=++h)if(o=y[n],n!==t&&null!=o.map&&o.getVisible()&&(a=l[n],(!(n<t)||a.willSpiderfy)&&this.ptDistanceSq(i.pt,a.pt)<u)){i.willSpiderfy=a.willSpiderfy=!0;break}for(b=[],e=g=0,v=(k=this.markers).length;g<v;e=++g)s=k[e],l[e].willSpiderfy&&b.push(s);return b},v.makeHighlightListenerFuncs=function(e){return{highlight:(n=this,function(){return e._omsData.leg.setOptions({strokeColor:n.legColors.highlighted[n.map.mapTypeId],zIndex:n.highlightedLegZIndex})}),unhighlight:(t=this,function(){return e._omsData.leg.setOptions({strokeColor:t.legColors.usual[t.map.mapTypeId],zIndex:t.usualLegZIndex})})};var t,n},v.spiderfy=function(r,e){var t,i,o,s,a,l,p,u,c,n,h,g=this;return this.lockSpiderfy=!0,setTimeout(function(){g.lockSpiderfy=!1},1e3),v.spiderfiedMarkers=[],r.forEach(function(e,t){v.spiderfiedMarkers.push(e.marker)}),this.spiderfying=!0,n=r.length,t=this.ptAverage(function(){var e,t,n;for(n=[],e=0,t=r.length;e<t;e++)u=r[e],n.push(u.markerPt);return n}()),s=n>=this.circleSpiralSwitchover?this.generatePtsSpiral(n,t).reverse():this.generatePtsCircle(n,t),h=function(){var e,t,n;for(n=[],e=0,t=s.length;e<t;e++)o=s[e],i=this.ptToLl(o),c=this.minExtract(r,function(t){return function(e){return t.ptDistanceSq(e.markerPt,o)}}(this)),p=c.marker,l=new f.Polyline({map:this.map,path:[p.position,i],strokeColor:this.legColors.usual[this.map.mapTypeId],strokeWeight:this.legWeight,zIndex:this.usualLegZIndex}),p._omsData={usualPosition:p.position,leg:l},this.legColors.highlighted[this.map.mapTypeId]!==this.legColors.usual[this.map.mapTypeId]&&(a=this.makeHighlightListenerFuncs(p),p._omsData.hightlightListeners={highlight:d.addListener(p,"mouseover",a.highlight),unhighlight:d.addListener(p,"mouseout",a.unhighlight)}),p.setPosition(i),p.setZIndex(Math.round(this.spiderfiedZIndex+o.y)),n.push(p);return n}.call(this),delete this.spiderfying,this.spiderfied=!0,this.trigger("spiderfy",h,e)},v.unspiderfy=function(e){if(this.lockSpiderfy)return!1;var t,n,r,i,o,s,a;if(v.spiderfiedMarkers=[],null==e&&(e=null),null==this.spiderfied)return this;for(this.unspiderfying=!0,i=[],r=[],o=0,s=(a=this.markers).length;o<s;o++)null!=(n=a[o])._omsData?(n._omsData.leg.setMap(null),n!==e&&n.setPosition(n._omsData.usualPosition),n.setZIndex(null),null!=(t=n._omsData.hightlightListeners)&&(d.removeListener(t.highlight),d.removeListener(t.unhighlight)),delete n._omsData,i.push(n)):r.push(n);return delete this.unspiderfying,delete this.spiderfied,this.trigger("unspiderfy",i,r),this},v.ptDistanceSq=function(e,t){var n,r;return(n=e.x-t.x)*n+(r=e.y-t.y)*r},v.ptAverage=function(e){var t,n,r,i,o,s;for(r=i=0,o=0,s=e.length;o<s;o++)r+=(n=e[o]).x,i+=n.y;return t=e.length,new f.Point(r/t,i/t)},v.llToPt=function(e){return this.projHelper.getProjection().fromLatLngToDivPixel(e)},v.ptToLl=function(e){return this.projHelper.getProjection().fromDivPixelToLatLng(e)},v.minExtract=function(e,t){var n,r,i,o,s,a;for(i=s=0,a=e.length;s<a;i=++s)o=t(e[i]),(null==n||o<r)&&(r=o,n=i);return e.splice(n,1)[0]},v.arrIndexOf=function(e,t){var n,r,i;if(null!=e.indexOf)return e.indexOf(t);for(n=r=0,i=e.length;r<i;n=++r)if(e[n]===t)return n;return-1},(e.ProjHelper=function(e){return this.setMap(e)}).prototype=new f.OverlayView,e.ProjHelper.prototype.draw=function(){},e}();e.exports=n},function(e,t,n){(e.exports=n(8)()).push([e.id,'.point-cluster{position:absolute;color:#fff!important;z-index:2000;font-family:Helvetica,Verdana,Arial,sans-serif;width:50px;height:50px;text-align:center;font-size:11px;cursor:pointer}.point-cluster.large{width:50px;height:50px;line-height:50px!important;border-radius:50px}.point-cluster.medium{width:40px;height:40px;line-height:40px!important;border-radius:40px}.point-cluster.small{width:30px;height:30px;line-height:30px!important;border-radius:30px}#point_cluster_overlay{position:absolute}.marker-point{box-sizing:border-box;background:#0f2b5b;box-shadow:0 0 5px 1px #ccc;border:2px solid #fff;color:#fff;height:16px;width:16px;border-radius:16px;cursor:pointer}.fadePins{border:0 solid #fff;height:4px;width:4px;border-radius:4px}.PointHoverState{box-shadow:0 0 5px 20px rgba(146,155,168,.3);background:red;cursor:pointer}#popper-container,#popper-container-clicked{position:absolute;z-index:1000;background:pink;display:none}#popper-container-clicked .arrow_box,#popper-container-clicked .arrow_box_clicked,#popper-container .arrow_box,#popper-container .arrow_box_clicked{position:relative;background:#fff;display:inline-block;padding:5px 10px;box-shadow:0 3px 3px 0 rgba(0,0,0,.4);border-radius:3px;font-size:12px!important;font-weight:700}#popper-container-clicked .arrow_box:after,#popper-container-clicked .arrow_box_clicked:after,#popper-container .arrow_box:after,#popper-container .arrow_box_clicked:after{content:"";position:absolute;width:0;height:0;margin-left:0;bottom:0;left:calc(50% - 5px);box-sizing:border-box;border:1em solid #000;border-color:transparent transparent #fff #fff;transform-origin:0 0;transform:rotate(-45deg);box-shadow:-3px 3px 3px 0 rgba(0,0,0,.4);border-width:5px;top:100%}',""])},function(e,t){e.exports=function(){var s=[];return s.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},s.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(n[i]=!0)}for(r=0;r<e.length;r++){var o=e[r];"number"==typeof o[0]&&n[o[0]]||(t&&!o[2]?o[2]=t:t&&(o[2]="("+o[2]+") and ("+t+")"),s.push(o))}},s}},function(e,t){function n(e,t){function n(){}n.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new n,e.prototype.constructor=e}function d(e,t,n){this.marker_=e,this.handCursorURL_=e.handCursorURL,this.labelDiv_=document.createElement("div"),this.labelDiv_.style.cssText="position: absolute; overflow: hidden;",this.eventDiv_=document.createElement("div"),this.eventDiv_.style.cssText=this.labelDiv_.style.cssText,this.eventDiv_.setAttribute("onselectstart","return false;"),this.eventDiv_.setAttribute("ondragstart","return false;"),this.crossDiv_=d.getSharedCross(t)}function r(e){(e=e||{}).labelContent=e.labelContent||"",e.labelAnchor=e.labelAnchor||new google.maps.Point(0,0),e.labelClass=e.labelClass||"markerLabels",e.labelStyle=e.labelStyle||{},e.labelInBackground=e.labelInBackground||!1,void 0===e.labelVisible&&(e.labelVisible=!0),void 0===e.raiseOnDrag&&(e.raiseOnDrag=!0),void 0===e.clickable&&(e.clickable=!0),void 0===e.draggable&&(e.draggable=!1),void 0===e.optimized&&(e.optimized=!1),e.crossImage=e.crossImage||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png",e.handCursor=e.handCursor||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur",e.optimized=!1,this.label=new d(this,e.crossImage,e.handCursor),google.maps.Marker.apply(this,arguments)}n(d,google.maps.OverlayView),d.getSharedCross=function(e){var t;return void 0===d.getSharedCross.crossDiv&&((t=document.createElement("img")).style.cssText="position: absolute; z-index: 1000002; display: none;",t.style.marginLeft="-8px",t.style.marginTop="-9px",t.src=e,d.getSharedCross.crossDiv=t),d.getSharedCross.crossDiv},d.prototype.onAdd=function(){var n,r,i,o,s,a,l,p=this,u=!1,c=!1,t="url("+this.handCursorURL_+")",h=function(e){e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()},g=function(){p.marker_.setAnimation(null)};this.getPanes().markerLayer.appendChild(this.labelDiv_),this.getPanes().overlayMouseTarget.appendChild(this.eventDiv_),void 0===d.getSharedCross.processed&&(this.getPanes().markerLayer.appendChild(this.crossDiv_),d.getSharedCross.processed=!0),this.listeners_=[google.maps.event.addDomListener(this.eventDiv_,"mouseover",function(e){(p.marker_.getDraggable()||p.marker_.getClickable())&&(this.style.cursor="pointer",google.maps.event.trigger(p.marker_,"mouseover",e))}),google.maps.event.addDomListener(this.eventDiv_,"mouseout",function(e){!p.marker_.getDraggable()&&!p.marker_.getClickable()||c||(this.style.cursor=p.marker_.getCursor(),google.maps.event.trigger(p.marker_,"mouseout",e))}),google.maps.event.addDomListener(this.eventDiv_,"mousedown",function(e){c=!1,p.marker_.getDraggable()&&(u=!0,this.style.cursor=t),(p.marker_.getDraggable()||p.marker_.getClickable())&&(google.maps.event.trigger(p.marker_,"mousedown",e),h(e))}),google.maps.event.addDomListener(document,"mouseup",function(e){var t;if(u&&(u=!1,p.eventDiv_.style.cursor="pointer",google.maps.event.trigger(p.marker_,"mouseup",e)),c){if(s){(t=p.getProjection().fromLatLngToDivPixel(p.marker_.getPosition())).y+=20,p.marker_.setPosition(p.getProjection().fromDivPixelToLatLng(t));try{p.marker_.setAnimation(google.maps.Animation.BOUNCE),setTimeout(g,1406)}catch(e){}}p.crossDiv_.style.display="none",p.marker_.setZIndex(n),c=!(o=!0),e.latLng=p.marker_.getPosition(),google.maps.event.trigger(p.marker_,"dragend",e)}}),google.maps.event.addListener(p.marker_.getMap(),"mousemove",function(e){var t;u&&(c?(e.latLng=new google.maps.LatLng(e.latLng.lat()-r,e.latLng.lng()-i),t=p.getProjection().fromLatLngToDivPixel(e.latLng),s&&(p.crossDiv_.style.left=t.x+"px",p.crossDiv_.style.top=t.y+"px",p.crossDiv_.style.display="",t.y-=20),p.marker_.setPosition(p.getProjection().fromDivPixelToLatLng(t)),s&&(p.eventDiv_.style.top=t.y+20+"px"),google.maps.event.trigger(p.marker_,"drag",e)):(r=e.latLng.lat()-p.marker_.getPosition().lat(),i=e.latLng.lng()-p.marker_.getPosition().lng(),n=p.marker_.getZIndex(),a=p.marker_.getPosition(),l=p.marker_.getMap().getCenter(),s=p.marker_.get("raiseOnDrag"),c=!0,p.marker_.setZIndex(1e6),e.latLng=p.marker_.getPosition(),google.maps.event.trigger(p.marker_,"dragstart",e)))}),google.maps.event.addDomListener(document,"keydown",function(e){c&&27===e.keyCode&&(s=!1,p.marker_.setPosition(a),p.marker_.getMap().setCenter(l),google.maps.event.trigger(document,"mouseup",e))}),google.maps.event.addDomListener(this.eventDiv_,"click",function(e){(p.marker_.getDraggable()||p.marker_.getClickable())&&(o?o=!1:(google.maps.event.trigger(p.marker_,"click",e),h(e)))}),google.maps.event.addDomListener(this.eventDiv_,"dblclick",function(e){(p.marker_.getDraggable()||p.marker_.getClickable())&&(google.maps.event.trigger(p.marker_,"dblclick",e),h(e))}),google.maps.event.addListener(this.marker_,"dragstart",function(e){c||(s=this.get("raiseOnDrag"))}),google.maps.event.addListener(this.marker_,"drag",function(e){c||s&&(p.setPosition(20),p.labelDiv_.style.zIndex=1e6+(this.get("labelInBackground")?-1:1))}),google.maps.event.addListener(this.marker_,"dragend",function(e){c||s&&p.setPosition(0)}),google.maps.event.addListener(this.marker_,"position_changed",function(){p.setPosition()}),google.maps.event.addListener(this.marker_,"zindex_changed",function(){p.setZIndex()}),google.maps.event.addListener(this.marker_,"visible_changed",function(){p.setVisible()}),google.maps.event.addListener(this.marker_,"labelvisible_changed",function(){p.setVisible()}),google.maps.event.addListener(this.marker_,"title_changed",function(){p.setTitle()}),google.maps.event.addListener(this.marker_,"labelcontent_changed",function(){p.setContent()}),google.maps.event.addListener(this.marker_,"labelanchor_changed",function(){p.setAnchor()}),google.maps.event.addListener(this.marker_,"labelclass_changed",function(){p.setStyles()}),google.maps.event.addListener(this.marker_,"labelstyle_changed",function(){p.setStyles()})]},d.prototype.onRemove=function(){var e;for(this.labelDiv_.parentNode.removeChild(this.labelDiv_),this.eventDiv_.parentNode.removeChild(this.eventDiv_),e=0;e<this.listeners_.length;e++)google.maps.event.removeListener(this.listeners_[e])},d.prototype.draw=function(){this.setContent(),this.setTitle(),this.setStyles()},d.prototype.setContent=function(){var e=this.marker_.get("labelContent");if(void 0===e.nodeType)this.labelDiv_.innerHTML=e,this.eventDiv_.innerHTML=this.labelDiv_.innerHTML;else{for(;this.labelDiv_.lastChild;)this.labelDiv_.removeChild(this.labelDiv_.lastChild);for(;this.eventDiv_.lastChild;)this.eventDiv_.removeChild(this.eventDiv_.lastChild);this.labelDiv_.appendChild(e),e=e.cloneNode(!0),this.eventDiv_.appendChild(e)}},d.prototype.setTitle=function(){this.eventDiv_.title=this.marker_.getTitle()||""},d.prototype.setStyles=function(){var e,t,r=this;for(e in this.labelDiv_.className=this.marker_.get("labelClass"),this.eventDiv_.className=this.labelDiv_.className,this.marker_.get("labelData")&&this.marker_.get("labelData").forEach(function(e,t){for(var n in e)r.eventDiv_.dataset[n]=e[n]}),this.labelDiv_.style.cssText="",this.eventDiv_.style.cssText="",t=this.marker_.get("labelStyle"))t.hasOwnProperty(e)&&(this.labelDiv_.style[e]=t[e],this.eventDiv_.style[e]=t[e]);this.setMandatoryStyles()},d.prototype.setMandatoryStyles=function(){this.labelDiv_.style.position="absolute",this.labelDiv_.style.overflow="hidden",void 0!==this.labelDiv_.style.opacity&&""!==this.labelDiv_.style.opacity&&(this.labelDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity='+100*this.labelDiv_.style.opacity+')"',this.labelDiv_.style.filter="alpha(opacity="+100*this.labelDiv_.style.opacity+")"),this.eventDiv_.style.position=this.labelDiv_.style.position,this.eventDiv_.style.overflow=this.labelDiv_.style.overflow,this.eventDiv_.style.opacity=.01,this.eventDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity=1)"',this.eventDiv_.style.filter="alpha(opacity=1)",this.setAnchor(),this.setPosition(),this.setVisible()},d.prototype.setAnchor=function(){var e=this.marker_.get("labelAnchor");this.labelDiv_.style.marginLeft=-e.x+"px",this.labelDiv_.style.marginTop=-e.y+"px",this.eventDiv_.style.marginLeft=-e.x+"px",this.eventDiv_.style.marginTop=-e.y+"px"},d.prototype.setPosition=function(e){var t=this.getProjection().fromLatLngToDivPixel(this.marker_.getPosition());void 0===e&&(e=0),this.labelDiv_.style.left=Math.round(t.x)+"px",this.labelDiv_.style.top=Math.round(t.y-e)+"px",this.eventDiv_.style.left=this.labelDiv_.style.left,this.eventDiv_.style.top=this.labelDiv_.style.top,this.setZIndex()},d.prototype.setZIndex=function(){var e=this.marker_.get("labelInBackground")?-1:1;void 0===this.marker_.getZIndex()?this.labelDiv_.style.zIndex=parseInt(this.labelDiv_.style.top,10)+e:this.labelDiv_.style.zIndex=this.marker_.getZIndex()+e,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex},d.prototype.setVisible=function(){this.marker_.get("labelVisible")?this.labelDiv_.style.display=this.marker_.getVisible()?"block":"none":this.labelDiv_.style.display="none",this.eventDiv_.style.display=this.labelDiv_.style.display},n(r,google.maps.Marker),r.prototype.setMap=function(e){google.maps.Marker.prototype.setMap.apply(this,arguments),this.label.setMap(e)},e.exports=r},function(e,t,n){function l(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=d[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(a(r.parts[o],t))}else{var s=[];for(o=0;o<r.parts.length;o++)s.push(a(r.parts[o],t));d[r.id]={id:r.id,refs:1,parts:s}}}}function p(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r],o=i[0],s={css:i[1],media:i[2],sourceMap:i[3]};n[o]?n[o].parts.push(s):t.push(n[o]={id:o,parts:[s]})}return t}function u(e,t){var n=o(),r=s[s.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),s.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function c(e){e.parentNode.removeChild(e);var t=s.indexOf(e);0<=t&&s.splice(t,1)}function h(e){var t=document.createElement("style");return t.type="text/css",u(e,t),t}function a(t,e){var n,r,i,o,s;if(e.singleton){var a=v++;n=f||(f=h(e)),r=g.bind(null,n,a,!1),i=g.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(o=e,(s=document.createElement("link")).rel="stylesheet",u(o,s),r=function(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}.bind(null,n=s),i=function(){c(n),n.href&&URL.revokeObjectURL(n.href)}):(n=h(e),r=function(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){c(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}function g(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=y(t,i);else{var o=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}var d={},r=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}},i=r(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),o=r(function(){return document.head||document.getElementsByTagName("head")[0]}),f=null,v=0,s=[];e.exports=function(e,s){void 0===(s=s||{}).singleton&&(s.singleton=i()),void 0===s.insertAt&&(s.insertAt="bottom");var a=p(e);return l(a,s),function(e){for(var t=[],n=0;n<a.length;n++){var r=a[n];(i=d[r.id]).refs--,t.push(i)}e&&l(p(e),s);for(n=0;n<t.length;n++){var i;if(0===(i=t[n]).refs){for(var o=0;o<i.parts.length;o++)i.parts[o]();delete d[i.id]}}}};var m,y=(m=[],function(e,t){return m[e]=t,m.filter(Boolean).join("\n")})},function(e,t,n){var r=n(7);"string"==typeof r&&(r=[[e.id,r,""]]),n(10)(r,{}),r.locals&&(e.exports=r.locals)},function(e,n,t){var r;(function(t){!function(e){"use strict";var s={_storage:{},subscribe:function(e,t){var n=0,r=0,i="";for("string"==typeof e&&(e=[e]),"function"==typeof t&&(t=[t]);n<e.length;n++)for(i=e[n],s._storage[i]||(s._storage[i]=[]),r=0;r<t.length;r++)"function"==typeof t[r]&&s._storage[i].push(t[r])},unsubscribe:function(e,t){var n,r=0,i=0,o="";for("string"==typeof e&&(e=[e]),t.length||(t=[t]);r<e.length;r++){if(o=e[r],!s._storage[o])throw new Error("Type "+o+" does not exist.");for(i=0;i<t.length;i++)n=s._storage[o].indexOf(t[i]),s._storage[o].splice(n,1)}},publish:function(e,t){var n=0,r=0,i="";for("string"==typeof e&&(e=[e]);n<e.length;n++)for(i=e[n],s._storage[i]&&s._storage[i].constructor===Array||(s._storage[i]=[]),r=0;r<s._storage[i].length;r++)s._storage[i][r](t)}};"object"==typeof t&&t&&"object"==typeof t.exports?t.exports=s:void 0===(r=function(){return s}.apply(n,[]))||(t.exports=r)}()}).call(n,t(13)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}}]);